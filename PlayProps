Subject: Feature Request: Native "Oldest Message Age" Metric at Queue Level via SEMP v2

Dear Solace Support Team,
Summary
We are requesting a native queue-level attribute in SEMP v2 that provides the age of the oldest spooled message directly, without requiring a call to the /msgs endpoint.
Current Environment

Broker Version: PubSub+ 10.11.1.167
Deployment: 6 HA kits (3 instances each, 18 brokers total)
Queue Count: High volume across the environment
Monitoring Stack: Prometheus + Grafana

Business Requirement
We need to monitor message backlog age across all queues to detect consumer lag, stuck messages, and potential processing issues. Knowing how long the oldest message has been waiting in each queue is critical for our SLA monitoring and alerting.
Current Approach & Challenges
Since no direct "oldest message age" attribute exists at the queue level, we are currently using:
GET /SEMP/v2/monitor/msgVpns/{msgVpnName}/queues/{queueName}/msgs?count=1
This retrieves the oldest message's spooledTime, from which we calculate the age.
However, this approach has significant performance implications:

CPU Impact: Each polling cycle (hourly) causes an 8–10% CPU spike on brokers with large queue counts
Scalability Concerns: The /msgs endpoint is expensive by design and not recommended for frequent polling, yet there is no alternative for this metric
Operational Risk: As our queue count grows, this overhead will increase proportionally

Feature Request
We propose adding a native attribute at the queue object level, such as:
GET /SEMP/v2/monitor/msgVpns/{msgVpnName}/queues/{queueName}
Response:
json{
  "data": {
    "queueName": "example-queue",
    "spooledMsgCount": 15000,
    "oldestMsgId": 123456,
    "oldestMsgAgeSeconds": 3600,   // <-- Requested attribute
    "oldestMsgSpooledTime": 1701234567,  // <-- Alternative: epoch timestamp
    ...
  }
}
Benefits of This Approach

Efficiency: The broker already tracks oldestMsgId internally; exposing its timestamp or calculated age would be a lightweight addition
Reduced Load: Eliminates the need to query the expensive /msgs endpoint for monitoring purposes
Consistency: Aligns with existing queue-level metrics like spooledMsgCount and msgSpoolUsage
Broad Applicability: This is a common monitoring requirement that would benefit the wider Solace user community

Interim Guidance Request
While this feature is being considered, we would appreciate any guidance on:

Alternative approaches to obtain this metric with lower overhead
Recommended polling strategies for environments with high queue counts
Any internal/undocumented attributes that might already provide this information

We are happy to provide additional details about our environment or participate in any beta testing if this feature moves forward.
Thank you for your consideration.

---

Subject: Feature Request / Guidance Needed: Efficient Way to Retrieve “Oldest Message Age” for Queues (SEMP v2 Performance Impact)
Hello Solace Support Team,
I am currently running Solace PubSub+ version 10.11.1.167, and I’m looking for guidance—and possibly a feature request—regarding a reliable and efficient way to obtain the age of the oldest spooled message in a queue.
Current Approach
At present, we are using the SEMP v2 endpoint:
GET /SEMP/v2/monitor/msgVpns/{msgVpn}/queues/{queue}/msgs?count=1
This returns the oldest message, and we use the spooledTime field to calculate the message age.
We run this query through a Prometheus job once every hour across six Solace Kits, each in HA (3-node) configuration.
Issue Observed
As expected, the /msgs endpoint is expensive, and we are seeing:
CPU spikes of ~8–10% on brokers during every hourly poll
Larger spikes on systems with large numbers of queues
Overall system impact that scales with the number of queues
This makes the current method operationally risky as message volume and queue count grow.
Request
I would like to ask:
Is there an alternative, more efficient mechanism to obtain the age of the oldest message without querying /msgs?
If not available today, can Solace consider a feature enhancement to expose this metric directly at the queue level, such as:
A new field in /queues or /queueStats
A lightweight counter or metric like oldestMsgAge, oldestMsgTimestamp, or similar
Availability through Prometheus exporter or broker-level telemetry
This would eliminate the need for us to query each queue’s /msgs endpoint, significantly reducing load on the broker.
Why This Matters
We use this metric to monitor queue health and detect stuck consumers. This is critical for operations, observability, and early alerting.
A built-in queue-level metric would help reduce system overhead and improve the operational experience across large deployments.
Please let me know if there is a recommended best practice or if this can be considered as a feature enhancement in an upcoming release.
Thank you,
