package com.acme.solace.obz.state;

import java.util.Map;

public interface LatchingStateStore {

  record State(int active, long sinceEpochSec) {}

  /** 0->1 sets since to now; 1->1 keeps since; applies TTL if > 0 (seconds). */
  void setProblem(String metricBase, Map<String,String> labels, long nowEpochSec, long ttlSec);

  /** Sets active=0 and persists the key (removes TTL). */
  void setClear(String metricBase, Map<String,String> labels, long nowEpochSec);

  /** Snapshot of all keys for export to metrics. */
  Map<String, State> snapshot();
}
