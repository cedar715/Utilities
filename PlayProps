-- use a window long enough that a real outage wonâ€™t exceed it
solace_ha_node_left_unmatched{group,node} =
  clamp_min(
    sum by (group, node) (increase(sol_event_ha_node_left_total[30d])) -
    sum by (group, node) (increase(sol_event_ha_node_joined_total[30d])),
  0)
