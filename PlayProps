# 90d window; adjust to your retention
solace_ha_left_unmatched_by_host =
clamp_min(
  sum by (host) (increase(sol_event_system_ha_redun_group_node_left_total[90d])) -
  (
    sum by (host) (increase(sol_event_system_ha_redun_group_node_joined_total[90d]))
    or on(host) 0 * sum by (host) (increase(sol_event_system_ha_redun_group_node_left_total[90d]))
  ),
0)
