// build.gradle.kts

plugins {
    id("java")
    id("org.springframework.boot") version "3.3.3"
    id("io.spring.dependency-management") version "1.1.6"
}

java {
    toolchain {
        languageVersion.set(JavaLanguageVersion.of(17))
    }
}

repositories {
    mavenCentral()
}

dependencies {
    // --- Spring Boot starters ---
    implementation("org.springframework.boot:spring-boot-starter")                 // core + scheduling, etc.
    implementation("org.springframework.boot:spring-boot-starter-actuator")        // /actuator + health
    implementation("org.springframework.boot:spring-boot-starter-data-redis")      // Redis (Lettuce)
    implementation("io.micrometer:micrometer-registry-prometheus")                 // Prometheus metrics

    // ✅ Recommended: Jakarta Bean Validation for config validation
    implementation("org.springframework.boot:spring-boot-starter-validation")

    // Optional helpers
    compileOnly("org.projectlombok:lombok")
    annotationProcessor("org.projectlombok:lombok")

    // For @ConfigurationProperties metadata (nice dev UX)
    annotationProcessor("org.springframework.boot:spring-boot-configuration-processor")

    testImplementation("org.springframework.boot:spring-boot-starter-test")
}

// If you don’t want Jakarta validation, just remove this line above:
// implementation("org.springframework.boot:spring-boot-starter-validation")
